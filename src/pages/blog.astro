---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL;
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Blog - Pepioli">
    <h1 class="text-4xl md:text-5xl font-bold mb-2">Blog</h1>
    <p class="mb-8 md:mb-12 text-stone-600">Zde najdete mÃ© ÄlÃ¡nky a myÅ¡lenky.</p>
    
    <div class="bg-gradient-to-r from-rose-50 to-stone-50 border border-rose-100 p-6 md:p-8 rounded-2xl mb-12">
        <h2 class="text-xl md:text-2xl font-bold text-rose-700 mb-2">ğŸ“š ÄŒlÃ¡nky na Kamdu.cz</h2>
        <p class="text-stone-700 mb-4 md:mb-6">MÃ© profesionÃ¡lnÃ­ ÄlÃ¡nky o vzdÄ›lÃ¡vÃ¡nÃ­ a inspirativnÃ­ch osobnostech najdete na webu Kamdu:</p>
        <a href="https://www.kamdu.cz/author/josefina_povejsilova/" target="_blank" rel="noopener noreferrer" class="inline-block bg-rose-600 text-white px-6 py-2 rounded-full font-medium hover:bg-rose-700 transition focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2">
            NavÅ¡tÃ­vit profil na Kamdu.cz &rarr;
        </a>
    </div>

    <div class="grid gap-6 md:gap-8">
        {posts && posts.length > 0 ? posts.map((post) => (
            <article class="bg-white rounded-xl shadow-sm hover:shadow-md transition border border-stone-100 p-6 md:p-8 group">
                <div class="flex flex-col md:flex-row md:items-start gap-4 md:gap-6">
                    <div class="flex-1">
                        <h2 class="text-xl md:text-2xl font-bold mb-2 group-hover:text-rose-600 transition">
                            <a 
                                href={post.data.externalLink || `${base}blog/${post.slug}/`} 
                                target={post.data.externalLink ? "_blank" : undefined}
                                rel={post.data.externalLink ? "noopener noreferrer" : undefined}
                            >
                                {post.data.title}
                            </a>
                        </h2>
                        <time class="text-sm text-stone-500 block mb-3">
                            {post.data.pubDate.toLocaleDateString('cs-CZ')}
                        </time>
                        <p class="text-stone-600 text-sm md:text-base">{post.data.description}</p>
                    </div>
                    {post.data.externalLink && (
                        <span class="text-xs bg-rose-100 text-rose-600 px-3 py-1 rounded-full font-medium whitespace-nowrap h-fit">
                            Kamdu.cz â†—
                        </span>
                    )}
                </div>
            </article>
        )) : <p class="text-center text-stone-500 py-8">ZatÃ­m zde nejsou Å¾Ã¡dnÃ© ÄlÃ¡nky.</p>}
    </div>
</Layout>
