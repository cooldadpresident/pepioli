---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Blog - Pepioli">
    <h1 class="text-3xl font-bold mb-8">Blog</h1>
    <p class="mb-4">Zde najdete mé články a myšlenky.</p>
    
    <div class="bg-rose-50 border border-rose-100 p-6 rounded-lg mb-8">
        <h2 class="text-xl font-bold text-rose-700 mb-2">Externí články</h2>
        <p class="text-stone-700 mb-4">Mé starší články si můžete přečíst na webu Kamdu:</p>
        <a href="https://www.kamdu.cz/blog/" target="_blank" rel="noopener noreferrer" class="text-rose-600 font-medium hover:underline">
            Přejít na blog Josefíny Povejšilové na Kamdu.cz &rarr;
        </a>
    </div>

    <div class="grid gap-6">
        {posts.map((post) => (
            <article class="border-b border-stone-100 pb-6">
                <h2 class="text-2xl font-bold mb-2">
                    <a href={`/blog/${post.slug}/`} class="hover:text-rose-600 transition">
                        {post.data.title}
                    </a>
                </h2>
                <time class="text-sm text-stone-500 block mb-2">
                    {post.data.pubDate.toLocaleDateString('cs-CZ')}
                </time>
                <p class="text-stone-600 mb-3">{post.data.description}</p>
                {post.data.externalLink && (
                    <span class="text-xs bg-stone-100 text-stone-600 px-2 py-1 rounded">Externí odkaz</span>
                )}
            </article>
        ))}
    </div>
</Layout>
