---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL;
const projects = (await getCollection('projects')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Projekty - Pepioli">
    <h1 class="text-3xl font-bold mb-8">üé® Projekty</h1>
    <p class="mb-8 text-stone-600">Uk√°zky m√© pr√°ce a kreativn√≠ch projekt≈Ø.</p>

    <div class="grid gap-8">
        {projects.map((project) => (
            <article class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 hover:shadow-md transition">
                <h2 class="text-2xl font-bold mb-2">
                    <a href={`${base}projekty/${project.slug}/`} class="hover:text-rose-600 transition">
                        {project.data.title}
                    </a>
                </h2>
                <p class="text-stone-600 mb-4">{project.data.description}</p>
                <div class="flex flex-wrap gap-2 mb-4">
                    <span class="bg-stone-100 text-stone-600 px-3 py-1 rounded-full text-xs font-medium">
                        {project.data.pubDate.getFullYear()}
                    </span>
                    {project.data.link && (
                        <a href={project.data.link} target="_blank" rel="noopener noreferrer" class="bg-rose-100 text-rose-600 px-3 py-1 rounded-full text-xs font-medium hover:bg-rose-200 transition">
                            Odkaz ‚Üó
                        </a>
                    )}
                </div>
                <a href={`${base}projekty/${project.slug}/`} class="text-rose-600 font-medium hover:underline focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 rounded">
                    V√≠ce o projektu &rarr;
                </a>
            </article>
        ))}
    </div>
</Layout>
