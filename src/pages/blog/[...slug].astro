---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
	<article class="prose prose-stone lg:prose-xl mx-auto">
        <div class="mb-8 text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-2">{post.data.title}</h1>
            <time class="text-stone-500">{post.data.pubDate.toLocaleDateString('cs-CZ')}</time>
        </div>
        {post.data.heroImage && <img src={post.data.heroImage} alt={post.data.title} class="rounded-xl shadow-md mb-8 w-full object-cover max-h-[400px]" />}
        
        {post.data.externalLink && (
            <div class="bg-rose-50 border border-rose-100 p-4 rounded-lg mb-8 text-center">
                <p class="mb-2 font-medium text-rose-800">Tento článek pokračuje na externím webu:</p>
                <a href={post.data.externalLink} target="_blank" rel="noopener noreferrer" class="inline-block bg-rose-600 text-white px-6 py-2 rounded-full hover:bg-rose-700 transition">
                    Číst celý článek &rarr;
                </a>
            </div>
        )}

		<Content />
	</article>
</Layout>
